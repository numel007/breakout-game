<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Gamedev Canvas Workshop</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    canvas {
      background: #eee;
      display: block;
      margin: 0 auto;
    }
  </style>
</head>

<body>

  <canvas id="myCanvas" width="480" height="320"></canvas>

  <script>
    let canvas = document.getElementById("myCanvas")
    let ctx = canvas.getContext("2d")
    let x = canvas.width / 2
    let y = canvas.height - 30
    let dx = 2
    let dy = -2
    let ballRadius = 10
    let paddleHeight = 10
    let paddleWidth = 75
    let paddleX = (canvas.width - paddleWidth) / 2

    const drawBall = () => {
      ctx.beginPath()
      ctx.arc(x, y, ballRadius, 0, Math.PI * 2)
      ctx.fillStyle = "#0095DD"
      ctx.fill()
      ctx.closePath()
    }

    const drawPaddle = () => {
      ctx.beginPath()
      ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight)
      ctx.fillStyle = "#0095DD";
      ctx.fill();
      ctx.closePath();
    }

    const draw = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height)
      drawBall()
      drawPaddle()
      x += dx
      y += dy

      if (x + dx > canvas.width || x + dx < 0) {
        dx = -dx;
      }

      if (y + dy > canvas.height || y + dy < 0) {
        dy = -dy;
      }

      if (rightPressed) {
        paddleX += 7
        if (paddleX + paddleWidth > canvas.width) {
          paddleX = canvas.width - paddleWidth;
        }

      } else if (leftPressed) {
        paddleX -= 7
        if (paddleX < 0) {
          paddleX = 0;
        }
      }
    }
    const keyDownHandler = (e) => {
      if (e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = true;
      }
      else if (e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = true;
      }
    }

    const keyUpHandler = (e) => {
      if (e.key == "Right" || e.key == "ArrowRight") {
        rightPressed = false;
      }
      else if (e.key == "Left" || e.key == "ArrowLeft") {
        leftPressed = false;
      }
    }
    let rightPressed = false
    let leftPressed = false
    setInterval(draw, 10)

    document.addEventListener("keydown", keyDownHandler, false)
    document.addEventListener("keyup", keyUpHandler, false)
  </script>

</body>

</html>