(()=>{"use strict";const t=class{constructor(t=0,s=0,i=100,e=100,h="#f00"){this.x=t,this.y=s,this.width=i,this.height=e,this.color=h}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t=0,s=0,i=10,e="black"){super(t,s,0,0,e),this.radius=i,this.dx=2,this.dy=-2}move(){this.x+=this.dx,this.y+=this.dy}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}},i=class extends t{constructor(t,s,i,e=75,h=20,l="#0095DD"){super(t,s,e,h,l),this.status=i}},e=class extends t{constructor(t,s,i=75,e=10,h="black"){super(t,s,i,e,h)}},h=class extends t{constructor(t="black",s=0,i="16px Arial"){super(),this.score=s,this.font=i,this.color=t}update(t){this.score+=t}reset(){this.score=0}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Score: ${this.score}`,8,20)}},l=class extends t{constructor(t,s="black",i=3,e="16px Arial"){super(),this.width=t,this.lives=i,this.font=e,this.color=s}loseLife(){this.lives-=1}reset(){this.lives=3}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`Lives: ${this.lives}`,this.width-65,20)}},r=document;new class{constructor(t,r,d=10,o=3,a=5,c=75,n=20,b=10,u=30,k=30,x=50,w=20,f=10){this.canvas=t,this.ctx=t.getContext("2d"),this.document=r,this.ball=new s(t.width/2,t.height-30,d),this.paddle=new e((t.width-75)/2,t.height-10),this.score=new h,this.lives=new l(t.width),this.brickRowCount=o,this.brickColumnCount=a,this.brickWidth=c,this.brickHeight=n,this.brickPadding=b,this.brickOffsetLeft=k,this.brickOffsetTop=u,this.row0Score=x,this.row1Score=w,this.row2Score=f,this.bricks=[],this.leftPressed=!1,this.rightPressed=!1,r.addEventListener("keydown",(t=>{this.keyDownHandler(t)}),!1),r.addEventListener("keyup",(t=>{this.keyUpHandler(t)}),!1),r.addEventListener("mousemove",(t=>{this.mouseMoveHandler(t)}),!1);for(let t=0;t<a;t+=1){this.bricks[t]=[];for(let s=0;s<o;s+=1)this.bricks[t][s]=new i(0,0,!0,void 0,void 0,s%2==1?"green":"red")}}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}mouseMoveHandler(t){const s=t.clientX-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&(this.paddle.x=s-this.paddle.width/2)}drawBricks(){for(let t=0;t<this.brickColumnCount;t+=1)for(let s=0;s<this.brickRowCount;s+=1)if(!0===this.bricks[t][s].status){const i=t*(this.brickWidth+this.brickPadding)+this.brickOffsetLeft,e=s*(this.brickHeight+this.brickPadding)+this.brickOffsetTop;this.bricks[t][s].x=i,this.bricks[t][s].y=e,this.bricks[t][s].render(this.ctx)}}collisionDetection(){for(let t=0;t<this.brickColumnCount;t+=1)for(let s=0;s<this.brickRowCount;s+=1){const i=this.bricks[t][s];!0===i.status&&this.ball.x>i.x&&this.ball.x<i.x+this.brickWidth&&this.ball.y>i.y&&this.ball.y<i.y+this.brickHeight&&(this.ball.dy=-this.ball.dy,i.status=0,2===s?this.score.update(this.row2Score):1===s?this.score.update(this.row1Score):0===s&&this.score.update(this.row0Score),this.score.score===this.brickColumnCount*this.row0Score+this.brickColumnCount*this.row1Score+this.brickColumnCount*this.row2Score&&(alert("Game complete"),this.document.location.reload()))}}runGame(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.collisionDetection(),this.drawBricks(),this.lives.render(this.ctx),this.score.render(this.ctx),this.ball.render(this.ctx),this.paddle.render(this.ctx),this.ball.move(),(this.ball.x+this.ball.dx>this.canvas.width||this.ball.x+this.ball.dx<0)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ballRadius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ballRadius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?this.ball.dy=-this.ball.dy:(this.lives.loseLife(),0===this.lives.lives?(alert("GAME OVER"),document.location.reload()):(this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=2,this.ball.dy=-2,this.paddle.x=(this.canvas.width-this.paddle.width)/2))),this.rightPressed?(this.paddle.x+=7,this.paddle.x+this.paddle.width>this.canvas.width&&(this.paddle.x=this.canvas.width-this.paddle.width)):this.leftPressed&&(this.paddle.x-=7,this.paddle.x<0&&(this.paddle.x=0)),requestAnimationFrame((()=>{this.runGame()}))}}(document.getElementById("myCanvas"),r).runGame()})();